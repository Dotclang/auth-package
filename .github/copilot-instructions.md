<!-- Autogenerated guidance for AI coding agents working on the AuthPackage repo. Keep concise and focused on discoverable patterns. -->

# AuthPackage — Copilot / AI agent instructions

Purpose: quickly orient an AI coding agent to this Laravel package so generated changes are accurate, minimal, and follow project patterns.

- Project type: Laravel package (PSR-4 namespaced under `Dotclang\AuthPackage`) intended to be installed via Composer into host Laravel applications.

- Key entry points
  - Service provider: `src/AuthServiceProvider.php` — loads routes (`routes/auth.php`), views (`resources/views` namespace `AuthPackage`), migrations, and publishes config/views/migrations.
  - Console command: `src/Console/InstallCommand.php` — used to publish views/config and shows Tailwind setup hints.
  - Routes: `routes/auth.php` — central routing for login/register/password flows (registers under `/auth/*` and `auth.` name prefix).

- Major components and where to find them
  - Controllers: `src/Http/Controllers/Auth/*` — LoginController, RegisterController, PasswordController, LogoutController, ConfirmPasswordController, DashboardController. Use these for request flows and redirects.
  - Form Requests (validation): `src/Http/Requests/*` — e.g. `LoginRequest`, `RegisterRequest`, `ResetPasswordRequest`. Prefer using these for validation when adding endpoints.
  - Middleware: `src/Http/Middleware/RequirePasswordConfirmed.php` — aliased as `password.confirmed` in the provider; follow its timeout/config usage (`config('auth.password_timeout')`).
  - Model example: `src/Models/User.php` — package uses host app's configured user model when available (see `RegisterController`).

- Design & data flow notes (why things are structured this way)
  - The package is UX-focused: views are Tailwind Blade templates loaded from `resources/views` and published into host app for customization.
  - Authentication flows delegate to the host app's auth configuration where appropriate (e.g., user model), so avoid hard-coding a specific User model.
  - Commands and publishing are used instead of forcing changes; prefer publishing and guiding the host app to integrate (e.g., Tailwind setup) rather than modifying host files directly.

- UI design requirements (keep these in mind when editing views)
  - Mobile-first: design templates with responsive Tailwind utilities (use px-4, mx-auto, max-w-md, and sm:/md: breakpoints). Views should look good on narrow screens by default and enhance at larger widths.
  - Dark mode: support Tailwind's `dark:` variants (assume host app may enable `class`-based dark mode). Avoid hard-coded colors — prefer palette tokens (bg-gray-50 / dark:bg-gray-900, text-gray-800 / dark:text-gray-100).
  - Reusable components: prefer Blade components or small include partials for repeated UI pieces (inputs, buttons, alerts, form layout). Place package-level components under `resources/views/components` and when published they will live in `resources/views/vendor/AuthPackage/components` — reference them via the `AuthPackage` view namespace or includes.
  - Tailwind scanning: update install notes to include component paths when asking users to configure `tailwind.config.js`, e.g. include `"./resources/views/vendor/AuthPackage/**/*.blade.php"` so published components and views are picked up.

- Conventions and patterns specific to this package
  - View namespace: use `view('AuthPackage::auth.login')` to reference package views internally; when publishing, resources are copied to `resources/views/vendor/AuthPackage`.
  - Route naming: all routes use `auth.` prefix; redirect and compatibility routes (e.g., `/login`) simply redirect to package routes — preserve these names when adding routes.
  - Rate limiting: LoginController uses `RateLimiter::tooManyAttempts` with a throttle key of `email|ip` — keep this pattern for consistent UX.
  - Config merging: `AuthServiceProvider::register()` merges `config/auth.php` with the host `auth` config. Changes to auth settings should be done in `config/auth.php` so they merge correctly.

- Tests & build
  - There are currently no tests in the package; if you add tests, follow Laravel package testing conventions (PHPUnit with `phpunit.xml`) and keep tests isolated from the host app where possible.
  - Typical dev commands to run locally (host app required): `composer install`, `php artisan vendor:publish --provider="Dotclang\\AuthPackage\\AuthServiceProvider" --tag=views`, `php artisan authpackage:install`, `npm install` and `npm run dev` for Tailwind assets.

- Accepted change patterns
  - Non-breaking: prefer to add new, optional configuration keys (with defaults) to `config/auth.php` and merge them in the provider.
  - Backwards compatibility: controllers reference config keys and the host app's model — avoid introducing direct package-only model assumptions.
  - Public API: keep ServiceProvider behavior (published tags and route loading) stable; breaking changes must be documented in `README.md` and the package `composer.json` version bumped.

- Integration and external dependencies
  - TailwindCSS is expected in the host app (see install command notes). The package does not bundle frontend tooling.
  - Mail must be configured in the host app for password reset emails to work.

- Quick examples (copyable patterns)
  - Reference published view: view('AuthPackage::auth.register')
  - Use host user model safely (from RegisterController):
    $userModel = app('config')->get('auth.providers.users.model', 'App\\Models\\User');
    if (! class_exists($userModel)) { $userModel = 'App\\Models\\User'; }

- Files to inspect when implementing changes
  - `src/AuthServiceProvider.php` — provider entrypoints
  - `routes/auth.php` and `routes/web.php` — route definitions and names
  - `src/Http/Controllers/Auth/*` and `src/Http/Requests/*` — request handlers and validation
  - `resources/views/*` — Blade templates (Tailwind classes)
  - `config/auth.php` — package config merged into host `auth` config

- When to ask for human review
  - Any change that alters published file structure, route names, middleware aliases, or the public ServiceProvider API.
  - UI/UX changes that affect the Blade templates' class names or Tailwind expectations — confirm with a maintainer.

If anything above is unclear or you need examples for a specific change (route, controller, or view edit), ask and I'll expand the instruction with precise code snippets or tests to add.
